import{isArray,slice}from"/uncdn/https://unpkg.com/uarray@^1.0.0?module";import udomdiff from"/uncdn/https://unpkg.com/udomdiff@^1.1.0?module";import{aria,attribute,data,event,ref,setter,text}from"/uncdn/https://unpkg.com/uhandlers@^0.2.0?module";import{diffable}from"/uncdn/https://unpkg.com/uwire@^1.0.1?module";import{reducePath}from"./node.js?module";const diff=(e,t,n)=>udomdiff(e.parentNode,t,n,diffable,e),handleAnything=e=>{let t,n,r=[];const d=i=>{switch(typeof i){case"string":case"number":case"boolean":t!==i&&(t=i,n?n.textContent=i:n=document.createTextNode(i),r=diff(e,r,[n]));break;case"object":case"undefined":if(null==i){t!=i&&(t=i,r=diff(e,r,[]));break}if(isArray(i)){t=i,0===i.length?r=diff(e,r,[]):"object"==typeof i[0]?r=diff(e,r,i):d(String(i));break}"ELEMENT_NODE"in i&&t!==i&&(t=i,r=diff(e,r,11===i.nodeType?slice.call(i.childNodes):[i]))}};return d},handleAttribute=(e,t)=>"ref"===t?ref(e):"aria"===t?aria(e):"data"===t?data(e):"."===t.slice(0,1)?setter(e,t.slice(1)):"on"===t.slice(0,2)?event(e,t):attribute(e,t);export function handlers(e){const{type:t,path:n}=e,r=n.reduceRight(reducePath,this);return"node"===t?handleAnything(r):"attr"===t?handleAttribute(r,e.name):text(r)}